# Readme
Here we explain the variables and functions that we used in our program. 
## Variables

### Important variables
#### V
The list of index of all vehicles.
#### vehs
The dataframe tha describe all information of vehicles, including due info, produced info, type info, and order info.
#### trans
The dataframe that describe all information of planned transports, including segment info, time info, and capacity info.
#### transportation_combination
The dataframe include all possible planned transportation combination, column "route" store the list planned transportation combination with order.
#### arrival_date
The list of date that vehicle arrival its destination.
#### cap_trans
The list of rest capacity for every planned transport after assign vehicles.
#### selected_route
selected_route[v] is a list of chosen route for specific vehicle v.
#### sol
The final solution the method get, should be an integer.


### Auxiliary Variables
#### file_path
The path of input file, is a str.
#### dataframes
The dict stored all pre-processing data by function "read_inst_file_to_dataframe".
#### P
P[v] is a list of index of plan (which route to deliver) for specific vehicle v.
#### S
S[v][p] is a list of index of segment if vehicle v choose plan p to deliver
#### T
The list of index of planned transports
#### T_vps
T_vps[v][p][s] is the index of planned transports for specific v,p,s. v in V, p in P[v], s in S[v][p].
#### l
l[v][p][s] lead time for specific v,p,s. v in V, p in P[v], s in S[v][p].
#### plants
The list of all plants
#### deals
The list of all dealers
#### df, df_tr
Meaningless dataframe and list to store transportation_combination info grouping by same origin and destination.

## Functions

### Initialization Functions
#### read_inst_file_to_dataframe
input: file_path

description: Pre-processing the file inst00X.txt by grouping data by "key-words"

return: dataframes

#### read_data_from_dataframes
input: dataframes

description: Processing dataframes to datas we really need

return: V, vehs, T, T_vps, trans, l, P, S, transportation_combination, plants, deals

### Auxiliary Functions
#### split_route:
input: route(a str be like "TUR01PLANTTUR01PORT-TRUCK-01")

description: Split it to 3 part, origin, destination, way

return: origin, destination, way

#### cost_v
input: v, date, vehs

description: Compute the cost of vehicle *v* that arrival at *date*

return: s(the cost of this vehicle)

#### heu_sol_print
input: varrival_date, cap_trans, V, T, vehs,trans

description: print heuristic algorithm result

return: none

### IP model
#### solve_normal
input: V, vehs, T, T_vps, trans, l, P, S

description: Time based MIP model

return: the objValue of model

### Greedy Algorithm
### greedy_algorithm
input: V, vehs, T, trans, transportation_combination, plants, deals

description: Greedy algorithm by arrange vehicles by priority

return: arrival_date, cap_trans, selected_route, sol, df, df_tr

### CL_random_greedy_algorithm
input: V, vehs, T, trans, transportation_combination, plants, deals

description: Cardinality based random greedy algorithm by arrange vehicles by priority

return: arrival_date, cap_trans, selected_route, sol, df, df_tr

### VL_random_greedy_algorithm
input: V, vehs, T, trans, transportation_combination, plants, deals, alpha

description: Value based random greedy algorithm by arrange vehicles by priority

return: arrival_date, cap_trans, selected_route, sol, df, df_tr

### Local Search
#### local_search_1best
input: arrival_date, cap_trans, selected_route, sol, df, df_tr, V, vehs

description: Local search only use the neighborhood generated by Rearrange, using "best improvement" strategy.
Ended when we can no longer get a solution improve our final cost in the neighborhood.

return: arrival_date, cap_trans, selected_route, sol
#### local_search_1half
input: arrival_date, cap_trans, selected_route, sol, df, df_tr, V, vehs, trans, T

description: Local search only use the neighborhood generated by Rearrange, using "First-Best" strategy.
Ended when we can no longer get a solution improve our final cost in the neighborhood.


return: arrival_date, cap_trans, selected_route, sol

#### local_search_op2
input: arrival_date, cap_trans, selected_route, sol, df, df_tr, V, vehs, trans, T

description: Local search only use the neighborhood generated by Swap, using "best improvement" strategy.
Ended when we can no longer get a solution improve our final cost in the neighborhood.

return: arrival_date, cap_trans, selected_route, sol

#### local_search_op12
input: arrival_date, cap_trans, selected_route, sol, df, df_tr, V, vehs, trans, T

description: Local search use the neighborhood generated by Rearrange and Swap, using "best improvement" strategy for both.
Ended when we can no longer get a solution improve our final cost in the neighborhood.

return: arrival_date, cap_trans, selected_route, sol
#### local_search_1half2best
input: arrival_date, cap_trans, selected_route, sol, df, df_tr, V, vehs, trans, T

description: Local search use the neighborhood generated by Rearrange and Swap, 
using "First-Best" strategy for Rearrange, using "best improvement" strategy for Swap.
Ended when we can no longer get a solution improve our final cost in the neighborhood.

return: arrival_date, cap_trans, selected_route, sol
#### local_search_1half2best_remain
input: arrival_date, cap_trans, selected_route, sol, df, df_tr, optu1 ,optu2, his1, his2, V, vehs, trans, T

description: Local search use the neighborhood generated by Rearrange and Swap, 
using "First-Best" strategy for Rearrange, using "best improvement" strategy for Swap.
Using "remain" technology to remember the sub-opt improvement for last iteration to accelerate the algorithm.
Ended when we can no longer get a solution improve our final cost in the neighborhood.

return: arrival_date, cap_trans, selected_route, sol

### Combined Heuristic Algorithm
#### greedy_local_op2
input: V, vehs, T, trans, transportation_combination, plants, deals

description: Using *greedy_algorithm* to get an initial, then use *local_search_op2* to obtain final value.

return: arrival_date, cap_trans, selected_route, sol
#### greedy_local_op12
input: V, vehs, T, trans, transportation_combination, plants, deals

description: Using *greedy_algorithm* to get an initial, then use *local_search_op12* to obtain final value.

return: arrival_date, cap_trans, selected_route, sol
#### greedy_local_1half2best_remain
input: V, vehs, T, trans, transportation_combination, plants, deals

description: Using *greedy_algorithm* to get an initial, then use *local_search_1half2best_remain* to obtain final value.

return: arrival_date, cap_trans, selected_route, sol
#### CL_GRASP
input: V, vehs, T, trans, MaxIteration, transportation_combination, plants, deals

description: Using *CL_random_greedy_algorithm* to get an initial, then use *local_search_op12* to obtain final value.
 We run for *MaxIteration* times, and return the best one.

return: arrival_date, cap_trans, selected_route, sol
#### CL_GRASP_1half
input: V, vehs, T, trans, MaxIteration, transportation_combination, plants, deals

description: Using *CL_random_greedy_algorithm* to get an initial, then use *local_search_1half* to obtain final value.
 We run for *MaxIteration* times, and return the best one.

return: arrival_date, cap_trans, selected_route, sol
#### CL_GRASP_1best
input: V, vehs, T, trans, MaxIteration, transportation_combination, plants, deals

description: Using *CL_random_greedy_algorithm* to get an initial, then use *local_search_op1* to obtain final value.
 We run for *MaxIteration* times, and return the best one.

return: arrival_date, cap_trans, selected_route, sol
#### CL_GRASP_1half2best
input: V, vehs, T, trans, MaxIteration, transportation_combination, plants, deals

description: Using *CL_random_greedy_algorithm* to get an initial, then use *local_search_1half2best* to obtain final value.
 We run for *MaxIteration* times, and return the best one.

return: arrival_date, cap_trans, selected_route, sol
#### CL_GRASP_1half2best_remain
input: V, vehs, T, trans, MaxIteration, transportation_combination, plants, deals

description: Using *CL_random_greedy_algorithm* to get an initial, then use *local_search_1half2best_remain* to obtain final value.
 We run for *MaxIteration* times, and return the best one.

return: arrival_date, cap_trans, selected_route, sol
#### VL_GRASP
input: V, vehs, T, trans, alpha, MaxIteration, transportation_combination, plants, deals

description: Using *VL_random_greedy_algorithm* to get an initial, then use *local_search_op12n* to obtain final value.
 We run for *MaxIteration* times, and return the best one.

return: arrival_date, cap_trans, selected_route, sol
#### VL_GRASP_1half2best_remain
input: V, vehs, T, trans, alpha, MaxIteration, transportation_combination, plants, deals

description: Using *VL_random_greedy_algorithm* to get an initial, then use *local_search_1half2best_remain* to obtain final value.
 We run for *MaxIteration* times, and return the best one.

return: arrival_date, cap_trans, selected_route, sol













